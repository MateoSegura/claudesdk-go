name: zephyr-native-sim
description: >
  Synthetic build failures on native_sim/native/64 target for validating
  the benchmark infrastructure. These run without hardware or special
  toolchains â€” just the host GCC inside the devcontainer.

image: ghcr.io/mateosegura/devcontainer-zephyr:latest

volumes:
  zephyr-sdk: /usr/local/zephyr-sdk

entries:
  - id: sync-missing-kernel-header
    issue: synthetic
    fix_pr: synthetic
    broken_sha: HEAD
    difficulty: easy
    description: >
      The synchronization sample fails to compile because the
      #include <zephyr/kernel.h> directive was removed from main.c,
      causing undeclared identifier errors for K_FOREVER, K_SEM_DEFINE,
      K_THREAD_DEFINE, k_tid_t, and other kernel API symbols.
    board: native_sim/native/64
    app_path: samples/synchronization
    setup_commands:
      - ". /root/zephyrproject/zephyr/zephyr-env.sh"
      - "cd /root/zephyrproject/zephyr && sed -i 's/#include <zephyr\\/kernel.h>//' samples/synchronization/src/main.c"
    evaluation:
      command: "west build -b native_sim/native/64 samples/synchronization -p"
      success_exit_code: 0
